- Container_SearchBar:
    Control: GroupContainer@1.3.0
    Variant: ManualLayout
    Properties:
      Fill: =RGBA(245, 245, 245, 1)
      Height: =40
      RadiusBottomLeft: =20
      RadiusBottomRight: =20
      RadiusTopLeft: =20
      RadiusTopRight: =20
      Width: |-
        =With(
            {
                collapsedWidth: Container_IconSearch.X + Container_IconSearch.Width + Container_IconSearch.X,
                expandedWidth: Container_IconSearch.X + Container_IconSearch.Width + Container_IconSearch.X + Container_SearchField.Width + Container_IconSearch.X + Container_SearchField.Y
            },
            With(
                {
                    startWidth: If(cv_showSearch, collapsedWidth, expandedWidth),
                    endWidth: If(cv_showSearch, expandedWidth, collapsedWidth),
                    t: Timer_SearchBar.Value / Timer_SearchBar.Duration
                },
                With(
                    {
                        eased: If(t < 0.5, 2 * t * t, 1 - Power(-2 * t + 2, 2) / 2)
                    },
                    If(
                        gv_searchbar_animating,
                        startWidth + (endWidth - startWidth) * eased,
                        If(cv_showSearch, expandedWidth, collapsedWidth)
                    )
                )
            )
        )
      X: =50
      Y: =155
    Children:
      - Timer_SearchBar:
          Control: Timer@2.1.0
          Properties:
            Duration: =250
            OnTimerEnd: =Set(gv_searchbar_animating, false)
            Start: =gv_searchbar_animating
            Visible: =false
      - Container_IconSearch:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            DropShadow: =DropShadow.None
            Height: =Parent.Height - 2*Self.Y
            RadiusBottomLeft: =Parent.RadiusBottomLeft
            RadiusBottomRight: =Parent.RadiusBottomRight
            RadiusTopLeft: =Parent.RadiusTopLeft
            RadiusTopRight: =Parent.RadiusTopRight
            Width: =Self.Height
            X: =2
            Y: =2
          Children:
            - HtmlText_IconSearch_Background:
                Control: HtmlViewer@2.1.0
                Properties:
                  Height: =Parent.Height
                  HtmlText: |-
                    =With(
                        {
                            r: Parent.RadiusTopLeft,
                            c1: "#1a1a1a",
                            c2: "#a0a0a0",
                            angle: 135,
                            borderWidth: 1.5
                        },
                        "
                        <div 
                            style='
                                width:" & Self.Width & "px; 
                                height:" & Self.Height - .8 & "px; 
                                margin:0; 
                                padding:0; 
                                box-sizing:border-box; 
                                border-radius:" & r & "px; 
                                background:linear-gradient(" & angle & "deg, rgba(255,255,255,0.25), rgba(255,255,255,0.08));
                                display:flex; 
                                align-items:center;
                                justify-content:center;
                                overflow:hidden;
                            '
                        >
                            <div style='
                                width:" & Self.Width - 2 * borderWidth & "px; 
                                height:" & Self.Height - 1 - 2 * borderWidth & "px; 
                                border-radius:" & r - borderWidth & "px;
                                background:linear-gradient(" & angle & "deg, " & c1 & " 0%, " & c2 & " 100%);
                                display:flex; 
                                align-items:center;
                                justify-content:center;
                                color:white;
                                font-family:Segoe UI, sans-serif;
                                font-weight:600;
                                text-shadow: 0 1px 2px rgba(0,0,0,0.5);
                            '>&nbsp;</div>
                        </div>
                        "
                    )
                  PaddingBottom: =0
                  PaddingLeft: =0
                  PaddingRight: =0
                  PaddingTop: =0
                  Width: =Parent.Width
            - Image_IconSearch:
                Control: Image@2.2.3
                Properties:
                  BorderColor: =RGBA(0, 0, 0, 1)
                  Height: =36
                  HoverFill: =RGBA(255, 255, 255, .15)
                  Image: "=\"data:image/svg+xml;utf8, \"&EncodeUrl(\n    If(\n        cv_showSearch,\n        \n        //Close Icon\n        \"<svg xmlns='http://www.w3.org/2000/svg' fill='#FFFFFF' aria-hidden='true' width='40px' height='40px' viewBox='0 0 20 20'><path d='m4.09 4.22.06-.07a.5.5 0 0 1 .63-.06l.07.06L10 9.29l5.15-5.14a.5.5 0 0 1 .63-.06l.07.06c.18.17.2.44.06.63l-.06.07L10.71 10l5.14 5.15c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L10 10.71l-5.15 5.14a.5.5 0 0 1-.63.06l-.07-.06a.5.5 0 0 1-.06-.63l.06-.07L9.29 10 4.15 4.85a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z' fill='#FFFFFF'/></svg>\",\n\n        //Magnifier Icon\n        \"<svg xmlns='http://www.w3.org/2000/svg' fill='#FFFFFF' aria-hidden='true' width='40px' height='40px' viewBox='0 0 20 20'><path d='M12.73 13.44a6.5 6.5 0 1 1 .7-.7l3.42 3.4a.5.5 0 0 1-.63.77l-.07-.06-3.42-3.41Zm-.71-.71A5.54 5.54 0 0 0 14 8.5a5.5 5.5 0 1 0-1.98 4.23Z' fill='#FFFFFF'/>\n        </svg>\"\n    )\n)"
                  OnSelect: |-
                    =UpdateContext({cv_showSearch: !cv_showSearch});
                    Concurrent(
                        Reset(Timer_SearchBar),
                        Reset(TextInputCanvas_SearchField)
                    );
                    Set(gv_searchbar_animating, true)
                  PaddingBottom: =(Self.Width * .4)/2
                  PaddingLeft: =Self.PaddingRight
                  PaddingRight: =Self.PaddingTop
                  PaddingTop: =(Self.Height * .4)/2
                  Width: =36
      - Container_SearchField:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            DropShadow: =DropShadow.None
            Height: =Parent.Height - 2*Self.Y
            RadiusBottomLeft: =Parent.RadiusBottomLeft
            RadiusBottomRight: =Parent.RadiusBottomRight
            RadiusTopLeft: =Parent.RadiusTopLeft
            RadiusTopRight: =Parent.RadiusTopRight
            Visible: =cv_showSearch || gv_searchbar_animating
            X: =Container_IconSearch.X + Container_IconSearch.Width + Self.Y
            Y: |
              =4
          Children:
            - TextInputCanvas_SearchField:
                Control: TextInput@0.0.54
                Properties:
                  BasePaletteColor: =ColorValue("#1a1a1a")
                  Fill: =RGBA(255, 255, 255, 1)
                  Height: =Parent.Height
                  PaddingLeft: =5
                  PaddingRight: =5
                  Placeholder: ="Search..."
                  TriggerOutput: ='TextInputCanvas.TriggerOutput'.Delayed
                  Visible: =cv_showSearch && !gv_searchbar_animating
                  Width: =Parent.Width
